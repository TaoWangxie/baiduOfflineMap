_jsload2 && _jsload2('tile', 'function Fh(){this.Jd=this.mq=this.Vp=this.Yj=s;this.ME=t;this.ki=s}z.lang.xa(Fh,xd,"MobileInfoWindow"); z.extend(Fh.prototype,{initialize:function(a){this.P=a;this.ki=document.createElement("div");this.ki.className="iw";this.ki.style.cssText="position:absolute; line-height:28px; text-align:center; border:0px;";var b=this.Yj=document.createElement("div");this.ki.appendChild(b);this.Vp=document.createElement("div");this.Vp.className="iw_l";b.appendChild(this.Vp);this.mq=document.createElement("div");this.mq.className="iw_r";b.appendChild(this.mq);this.Ck=document.createElement("a");this.Ck.setAttribute("target", "_blank");this.Ck.className="iw_s iw_s0 iw_c";this.Ck.innerHTML="<div class=\'iw_bg iw_cc\'></div>";b.appendChild(this.Ck);a.$f().ND.appendChild(this.ki);this.bind();this.Jd=this.Ck.getElementsByTagName("DIV")[0];this.Vp.style.display="block";this.mq.style.display="block";return this.ki},bind:function(){var a=this;z.V(a.Vp,"click",function(b){a.b_();b.preventDefault();b.stopPropagation()});z.V(a.mq,"click",function(b){a.GZ();b.preventDefault();b.stopPropagation()});z.V(a.Ck,"click",function(a){a.stopPropagation()}); z.Rb("touchstart touchmove touchend gesturestart gesturechange mousedown mouseout mouseover click mousewheel keydown selectstart".split(" "),function(b){z.V(a.Ck,b,oa);z.V(a.Vp,b,oa);z.V(a.mq,b,oa)})},BJ:ba(),pJ:ba(),ma:function(){return new S(this.JI.lng,this.JI.lat)},va:ba(),eb:u("ME"),aa:function(){z.U.aa(this.ca);this.ki.style.display="none";this.ME=t},show:function(a){a&&(this.point=a);z.U.show(this.ca);this.ki.style.display="block";this.ME=q;this.P.ba.xb=this},j0:function(){var a=this.P,b=this.$h, c=this.Yj.offsetWidth,e=this.Yj.offsetHeight,f=a.wb(),c=c/2+16,e=e/2+78;if(this.$h){var g=new T(0,0);b.x<c?g.x=c-b.x:f.width-b.x-8<c&&(g.x=f.width-b.x-8-c);b.y<e?g.y=e-b.y:60>f.height-b.y&&(g.y=f.height-b.y-60);0==g.x&&0==g.y||a.Ng(g.x,g.y)}},switchTo:function(a){this.$h=a.point;this.cd=a.name;this.wk=a.uid;this.pk=a.Ga;this.ZT=parseInt(this.P.platform.style.left);this.$T=parseInt(this.P.platform.style.top);this.JI=this.P.cc(this.$h);this.show();this.N_();this.EO()},E6:function(){this.Yj.className= "iw_rt";this.show();this.EO()},N_:function(){this.Ck.setAttribute("href","http://map.baidu.com/place/detail?uid="+this.wk+"&output=html&source=jsapi&operate=mapclick&clicktype=vector");this.Yj.className="iw_rt";this.Jd.innerHTML="<div class=\'iw_poir\'><div class=\'crl_ar\' style=\'white-space:nowrap;text-overflow:ellipsis;overflow:hidden;\'>"+this.cd+"</div></div>";this.draw()},EO:function(){var a=this;a.CE||(a.CE=setTimeout(function(){a.j0();clearTimeout(a.CE);a.CE=s},100))},K7:function(){var a=$("popList"); 43<this.Jd.textContent.length&&(58<=this.Jd.textContent.length?a.jb("zoom2"):a.jb("zoom1"))},C3:function(){this.Jd.innerHTML=""},draw:function(){if(this.$h){var a=this.$h,b=a.y;this.ki.style.left=a.x-98-this.ZT+"px";this.ki.style.top=b-62-this.$T+"px"}},F5:function(){db()&&(location.href="http://map.baidu.com/detail?qt=ninf&wd=&detail=scope&uid="+this.wk);M()&&(location.href="http://map.baidu.com/mobile/#place/detail/qt=inf&c=131&uid="+this.wk)},b_:function(){this.P.cc(this.$h);var a=this.P.la(), a=Math.pow(2,18-a),b=this.P.wb(),c=this.P.Jb,a="http://map.baidu.com/mobile/?third_party=uri_api#index/searchnearby/foo=bar/"+this.DZ({nb_x:c.lng+a*(this.$h.x-b.width/2),nb_y:c.lat-a*(this.$h.y-b.height/2),center_name:this.cd,from:"searchnearby"});window.open(a,"_blank")},GZ:function(){var a=this.P.ph,b=this.P.Xd()?"&operate=vectorclick":"&operate=mapclick",a=C.dd+"direction?origin=\\u6211\\u7684\\u4f4d\\u7f6e&destination="+this.cd+"&mode=navigation&output=html&src=jsapi"+b+"&region="+a;Ya("navlinkmobile"); window.open(a,"_blank")},DZ:function(a){if(!a)return"";var b=[],c;for(c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}});C.f2=Fh;z.extend(Vd.prototype,{EQ:function(){this.oH(this.map);this.Wp(0)},FE:function(a){this.Vu=new Wd(this);this.Vu.Ue(new Xd(this.map,this.Vu,a.bf));Va(Wa(3,4),["layer","indoor"])},Wp:function(){this.map.la();this.loaded||(this.fy(),this.loaded=q);this.eg()},za:function(){var a=this,b=a.map;b.addEventListener("loadcode",function(){a.Wp()});b.addEventListener("addtilelayer",function(b){a.Ue(b)});b.addEventListener("removetilelayer",function(b){a.gg(b)});b.addEventListener("setmaptype",function(b){a.Rg(b)}); b.addEventListener("zoomstartcode",function(){a.Sc()});a.map.addEventListener("setcustomstyles",function(b){a.uu(b.target);a.eg(q);Va(Wa(1,2,2),["instance","custom_style","image"])});b.addEventListener("initindoorlayer",function(b){a.FE(b)});a.oH(b)},oH:function(a){var b=this;a.addEventListener("mousewheel",function(a){b.TZ(a)});a.addEventListener("dblclick",function(a){b.bL(a)});a.addEventListener("rightdblclick",function(a){b.bL(a)});a.addEventListener("minuspress",function(a){b.aN(a)});a.addEventListener("pluspress", function(a){b.aN(a)});a.addEventListener("moving",function(){b.eg()});a.addEventListener("resize",function(){b.map.Xd()||b.eg()});b.map.addEventListener("setcustomstyles",function(){b.kw()});a.addEventListener("onvectorloaded",function(){a.Xd()&&(b.kw(),b.yg.style.visibility="")})},P2:function(){this.A1=new window.VectorLayer(this.map.M.Fe);this.map.Ue(this.A1)},Ue:function(a){var b=this,c=a.target;b.map.Xd();c.Gn&&this.map.Ue(c.Gn);if(c.ly){for(a=0;a<b.Tg.length;a++)if(b.Tg[a]===c)return;ab.load("vector", function(){c.za(b.map,b.yg);b.Tg.push(c)},q)}else{for(a=0;a<b.Ef.length;a++)if(b.Ef[a]===c)return;b.Ef.push(c);c.za(this.map,this.Ul);b.map.loaded&&b.eg()}},gg:function(a){a=a.target;this.map.Xd();a.Gn&&this.map.gg(a.Gn);if(a.ly){for(var b=0,c=this.Tg.length;b<c;b++)a===this.Tg[b]&&this.Tg.splice(b,1);a.remove()}else{var c=this.Lg,e=this.rj;for(b in e){var f=b.split("-")[1];f===a.da+""&&delete e[b]}for(b in c)f=b.split("-")[1],f===a.da+""&&delete c[b];b=0;for(c=this.Ef.length;b<c;b++)a===this.Ef[b]&& this.Ef.splice(b,1);a.remove();this.eg()}},TZ:function(a){var b=this.map;if(b.M.vp){var c=b.oo(b.Za+(a.Dq===q?1:-1));c.KD||(b.dispatchEvent(new R("onzoomstart")),b.Bc=b.Za,b.Za=c.zoom,a=a.bb,c=this.BA(a),zoomUnits=b.ya().Wb(b.la()),b.Jb=new N(c.lng+(b.width/2-a.x)*zoomUnits,c.lat-(b.height/2-a.y)*zoomUnits),b.ie=b.Dc.Dh(b.Jb,b.Qb),this.zoom(a))}},bL:function(a){var b=this.map;if(b.M.xD){var c=a.bb,e=1,f=c,g=new O(0,0);"onrightdblclick"===a.type&&(e=-1,f=new T(b.width/2,b.height/2));a=b.oo(b.Za+e); a.KD?1===e&&(c=b.tg(c),b.Hi(c)):(b.dispatchEvent(new R("onzoomstart")),b.Bc=b.Za,b.Za=a.zoom,1===e&&(b.Jb=this.BA(c),b.ie=b.Dc.Dh(b.Jb,b.Qb),e=0.5*(b.ya().Wb(b.Bc)/b.ya().Wb(a.zoom)),g.width=c.x-Math.round(b.width/2)*e,g.height=c.y-Math.round(b.height/2)*e),this.zoom(f,g));M()&&(b=b.wh())&&b.aa()}},aN:function(a){var b=this.map;if(b.M.sp){if(!this.ii){var c=b.oo(b.Za+("onpluspress"===a.type?1:-1));c.KD||(b.dispatchEvent(new R("onzoomstart")),a=new T(b.width/2,b.height/2),b.Bc=b.Za,b.Za=c.zoom,b.wh()&& (a=b.Bo(b.wh().ma(),b.Bc),c=b.tg(a,b.Bc),b.xk(b.width/2-a.x,b.height/2-a.y,c,q)),this.zoom(a))}}else"onpluspress"===a.type?b.DG():b.EG()},BA:function(a){var b=this.map,c=b.Jb,e=b.ya().Wb(b.Bc);return new N(c.lng+e*(a.x-b.width/2),c.lat-e*(a.y-b.height/2))},zoom:function(a,b){var c=this,e=c.map,f=e.Za,g=e.M.vG,i=f>g?q:t;if(f<e.Bc&&(f===g||f===g-1))i=q;var k=b?b.width:0,m=b?b.height:0,e=this.map,g=e.M,c=this,n=a.x-parseInt(i?c.nz.style.left:c.Mb.style.left,10)-e.offsetX,o=a.y-parseInt(i?c.nz.style.top: c.Mb.style.top,10)-e.offsetY;e.Wc&&z.U.aa(e.Wc);c.Ul.style.visibility="hidden";c.yg&&(c.yg.style.visibility="hidden");this.PU(i);c.uo.style.visibility="hidden";this.og.style.visibility="hidden";var p=[],i=e.Za-e.Bc;c.or?0<e.Za-e.Bc?c.or++:c.or--:c.or=i;this.ii&&0===this.ii.Ty&&(this.ii.stop(),this.ii=s,i=c.or);if((!b||0===b.width&&0===b.height)&&g.sp)e.ba.T1.action(a,0<i?q:t);var i=Math.pow(2,i),v=this.Cd,w=v.style;w.visibility="";if(e.M.Gk)if(this.og.style.visibility="visible",w.visibility="hidden", g=z.platform.Vk&&2.3<parseFloat(z.platform.uC)?q:t,z.platform.Vk&&!g)e.dispatchEvent(new R("onzoomend"));else{if(f!==e.Bc){var A=f>e.Bc?q:t;if(c.ZM!==q){c.ZM=q;var B=e.platform.style,g=e.offsetX,n=e.offsetY,o=e.width,f=e.height,D=a?a.x-g:o/2-g,F=a?a.y-n:f/2-n;B.WebkitTransformOrigin=D+"px "+F+"px";b=new O(0,0);new Fb({duration:300,fc:Gb.qD,Nc:30,Ba:function(a){var c=A?1+a:1-a/2;B.WebkitTransformOrigin=D+"px "+F+"px";B.WebkitTransform="translate3d("+-b.width*a+"px, "+-b.height*a+"px,0px) scale("+c+ ")"},finish:function(){e.Wc&&setTimeout(function(){z.U.show(e.Wc)},100);e.dispatchEvent(new R("onzoomend"));B.WebkitTransform="";c.ZM=t}})}}}else{for(f=v.children.length-1;-1<f;f--){var H={},G=v.children[f].style;H.top=parseInt(G.top)||0;H.left=parseInt(G.left)||0;H.width=parseInt(G.width);H.height=parseInt(G.height);H.pX=H.width*i-H.width;H.RW=H.height*i-H.height;H.rf=(H.left-n)*i-(H.left-n);H.sf=(H.top-o)*i-(H.top-o);p[f]=H;G.display="block"}v.OT=parseInt(v.style.left);v.ST=parseInt(v.style.top); this.ii&&(this.ii.stop(),this.ii=s);this.ii=new Fb({Nc:20,duration:g.sp?g.U1:1,fc:Gb.rD,Ba:function(a){if(!(a<0.1)){for(var b=p.length-1;b>-1;b--){var c=p[b];if(v.children[b]){var e=v.children[b].style;e.top=Math.round(c.top+c.sf*a)+"px";e.left=Math.round(c.left+c.rf*a)+"px";e.width=Math.ceil(c.width+c.pX*a)+"px";e.height=Math.ceil(c.height+c.RW*a)+"px"}}if(k||m){w.left=v.OT-k*a+"px";w.top=v.ST-m*a+"px"}}},finish:function(){c.eg();e.Wc&&(z.ga.oa&&z.ga.oa<8||document.compatMode==="BackCompat"?z.U.show(e.Wc): setTimeout(function(){z.U.show(e.Wc)},100));c.Ul.style.visibility="";c.uo.style.visibility="";c.og.style.visibility="";delete c.or;e.dispatchEvent(new R("onzoomend"));setTimeout(function(){if(c.yg)c.yg.style.visibility="";c.kw()},10);v=s;c.ii=s}})}},Rg:function(){var a=this,b=a.map;b.addEventListener("tilesloaded",function(){setTimeout(function(){a.kw()},200);b.removeEventListener("tilesloaded",arguments.callee)});for(var c in this.Lg)this.$x(this.Lg[c]);for(c in this.rj)this.$x(this.rj[c]);c=this.Ij; for(var e=0,f=c.length;e<f;e++)c[e].remove();delete this.Mb;this.Ij=[];this.rj=this.Lg={};this.fy();this.eg()},PU:function(a){var b=this.map,a=a||t;if(this.Cd)this.Cd.parentNode&&!this.ii&&(this.Cd.parentNode.removeChild(this.Cd),this.Cd=s,this.Cd=a?this.nz.cloneNode(q):this.Mb.cloneNode(q));else if(a){this.Cd=this.nz.cloneNode();for(var a=this.nz.childNodes,c=0,e=a.length;c<e;c++){var f=a[c].cloneNode(q);f.style.display="none";f.getContext("2d").drawImage(a[c],0,0);this.Cd.appendChild(f)}}else this.Cd= this.Mb.cloneNode(q);a=this.Cd;c=a.style;c.display="";c.zIndex-=100;b.platform.insertBefore(a,b.platform.firstChild)},kw:function(){this.Cd&&(ce(this.Cd),this.Cd.parentNode&&(this.Cd.parentNode.removeChild(this.Cd),this.Cd.innerHTML="",this.Cd=s))}}); ');
